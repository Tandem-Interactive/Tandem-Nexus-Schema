:root { 
  --tandem-navy: #13284c; 
  --tandem-blue: #009cd6; 
  --bg: #f3f4f6; 
  --surface: #ffffff; 
  --border: #e5e7eb; 
  --text-main: #1f2937; 
  --text-light: #6b7280; 
  --success: #10b981; 
  --warning: #f59e0b; 
  --error: #ef4444; 
}

* { box-sizing: border-box; }

body {
  width: 400px;
  min-height: 720px;
  height: auto;
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text-main);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

/* --- HEADER --- */
header { 
  background: var(--surface); 
  padding: 16px; 
  border-bottom: 1px solid var(--border); 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  flex-shrink: 0;
}

.brand-container { display: flex; align-items: center; gap: 12px; }
.brand-logo { width: 32px; height: 32px; object-fit: contain; }
.brand-text { 
  font-family: 'Montserrat', sans-serif; 
  font-size: 16px; 
  color: var(--tandem-navy); 
  letter-spacing: -0.5px; 
}
.nexus { font-weight: 700; } 
.schema { font-weight: 300; }

.header-controls { display: flex; align-items: center; gap: 10px; }
.status-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--border); }
.status-dot.online { background: var(--success); box-shadow: 0 0 0 2px #d1fae5; }
.status-dot.offline { background: var(--error); }
.icon-btn { background: none; border: none; cursor: pointer; color: var(--text-light); padding: 6px; border-radius: 50%; transition: 0.2s; }
.icon-btn:hover { background: #f3f4f6; color: var(--tandem-navy); }
.icon-btn:disabled { opacity: 0.6; cursor: not-allowed; }
.rotating { animation: spin 1s linear infinite; }

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* --- STATUS BAR --- */
.status-bar { 
  background: #f8fafc; 
  padding: 8px 16px; 
  display: flex; 
  justify-content: space-between; 
  font-size: 11px; 
  color: var(--text-light); 
  border-bottom: 1px solid var(--border); 
  flex-shrink: 0;
}
.status-item { display: flex; align-items: center; gap: 5px; max-width: 48%; }
.truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* --- TOOLBAR --- */
.toolbar { 
  background: var(--surface); 
  padding: 12px 16px; 
  border-bottom: 1px solid var(--border); 
  flex-shrink: 0;
}

/* Login Button Branding */
.btn-login { 
  background: var(--tandem-navy); /* Branded Navy */
  color: white; 
  border: none; 
  width: 100%; 
  padding: 10px; 
  border-radius: 6px; 
  font-weight: 600; 
  cursor: pointer; 
  display: flex; 
  align-items: center; 
  justify-content: center;
  gap: 8px;
  font-size: 13px; 
  margin-bottom: 12px; 
  box-shadow: 0 2px 5px rgba(19, 40, 76, 0.2);
}
.btn-login:hover { background: #0f203c; }
.btn-login .material-icons { font-size: 18px; }

.tool-row { display: flex; gap: 8px; align-items: center; }
.spacer { flex: 1; }

.btn-tool { 
  background: white; 
  border: 1px solid var(--border); 
  padding: 8px 12px; 
  border-radius: 6px; 
  cursor: pointer; 
  display: flex; 
  align-items: center; 
  gap: 6px; 
  transition: 0.2s; 
  color: var(--text-main); 
}
.btn-tool:hover { border-color: var(--tandem-blue); color: var(--tandem-blue); }
.btn-tool.magic { background: linear-gradient(135deg, var(--tandem-navy), var(--tandem-blue)); border: none; color: white; }
.btn-tool.magic:hover { opacity: 0.9; transform: translateY(-1px); }
.btn-icon-tool { background: white; border: 1px solid var(--border); color: var(--text-light); cursor: pointer; padding: 8px; border-radius: 6px; }
.btn-icon-tool:hover { border-color: var(--tandem-navy); color: var(--tandem-navy); }
.btn-text { font-size: 12px; font-weight: 600; }

#progress-container { background: var(--surface); padding: 0; position: relative; height: 4px; overflow: hidden; flex-shrink: 0; }
.progress-bar { width: 100%; height: 4px; background: #e5e7eb; } 
.progress-fill { height: 100%; background: var(--tandem-blue); width: 0%; transition: width 0.3s; }

/* --- TABS --- */
.tabs { display: flex; background: var(--surface); border-bottom: 1px solid var(--border); flex-shrink: 0; }
.tab { flex: 1; padding: 12px; background: none; border: none; font-size: 12px; font-weight: 600; color: var(--text-light); cursor: pointer; border-bottom: 3px solid transparent; transition: 0.2s; }
.tab.active { color: var(--tandem-navy); border-bottom-color: var(--tandem-navy); }

/* --- MAIN CONTENT --- */
main {
  flex: 1;
  position: relative;
  overflow: auto;
  background: #f9fafb;
  display: flex;
  flex-direction: column;
}

.view {
  position: relative;
  overflow-y: auto;
  padding: 16px;
  display: none;
  padding-bottom: 80px;
  flex: 1;
}
.view.active { display: block; }

#app-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 920px;
  overflow: auto;
  padding-bottom: 120px;
}

/* --- VISUAL BUILDER --- */
.empty-state { text-align: center; margin-top: 60px; color: #9ca3af; }
.empty-icon-bg { background: #eff6ff; color: var(--tandem-blue); width: 64px; height: 64px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; }
.schema-card { background: white; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 16px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); overflow: hidden; }
.card-header { padding: 12px 16px; background: #fff; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.card-title { font-size: 13px; font-weight: 700; color: var(--tandem-navy); display: flex; align-items: center; gap: 8px; }
.card-actions { display: flex; gap: 4px; }
.card-body { padding: 16px; background: #fafafa; }
.type-row { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; }
.type-row .type-label { font-size: 11px; font-weight: 600; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px; }
.type-row .type-select { flex: 1; }
.schema-card.collapsed .card-body { display: none; }

/* FIELDS */
.field-row { margin-bottom: 12px; }
.field-label { display: block; font-size: 11px; font-weight: 600; color: var(--text-light); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
.schema-input { width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 6px; font-size: 13px; font-family: 'Inter', sans-serif; box-sizing: border-box; }
.schema-input:focus { outline: none; border-color: var(--tandem-blue); }
.nested-container { border-left: 2px solid #e5e7eb; padding-left: 12px; margin-top: 8px; }
.btn-add-nested { background: none; border: 1px dashed var(--border); width: 100%; padding: 8px; color: var(--tandem-blue); font-size: 11px; font-weight: 600; cursor: pointer; border-radius: 4px; }
.btn-add-nested:hover { background: #eff6ff; }
.checkbox-group { display: flex; flex-wrap: wrap; gap: 8px; }
.checkbox-group label { background: white; border: 1px solid var(--border); padding: 6px 10px; border-radius: 4px; font-size: 11px; cursor: pointer; display: flex; align-items: center; gap: 6px; }
.checkbox-group input:checked + span { color: var(--tandem-blue); font-weight: bold; }

.fab { position: fixed; bottom: 90px; right: 20px; width: 56px; height: 56px; border-radius: 50%; background: var(--tandem-navy); color: white; border: none; box-shadow: 0 4px 12px rgba(19, 40, 76, 0.3); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; z-index: 10; }
.fab:hover { transform: scale(1.1); background: var(--tandem-blue); }

/* --- JSON EDITOR --- */
#json-view { display: none; flex-direction: column; overflow: hidden; padding-bottom: 16px; }
#json-view.view.active { display: flex; }
.json-actions { display: flex; justify-content: flex-end; margin-bottom: 8px; }
.json-actions .schema-switcher { width: 100%; }
.schema-switcher__label { font-size: 11px; color: var(--text-light); margin-bottom: 6px; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px; }
.schema-tab-list { display: flex; gap: 8px; flex-wrap: wrap; }
.schema-tab { border: 1px solid var(--border); padding: 6px 10px; border-radius: 6px; background: white; cursor: pointer; font-size: 12px; display: inline-flex; align-items: center; gap: 6px; color: var(--text-main); }
.schema-tab.active { border-color: var(--tandem-blue); color: var(--tandem-blue); background: #eff6ff; }
.schema-tab .status-dot { width: 8px; height: 8px; }
.code-wrapper { position: relative; flex: 1; display: flex; flex-direction: column; min-height: 320px; }
.copy-float { position: absolute; top: 10px; right: 10px; z-index: 2; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
#json-view .btn-icon-tool { display: inline-flex; align-items: center; gap: 6px; }
#json-editor { width: 100%; flex: 1; min-height: 0; border: 1px solid var(--border); border-radius: 6px; padding: 12px; font-family: monospace; font-size: 12px; resize: none; box-sizing: border-box; background: #0b1220; color: #e5e7eb; height: 100%; }
.validator-actions { display: none; }
.validator-btn { flex: 1; justify-content: center; }
.editor-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; font-size: 11px; color: var(--text-light); }
.json-valid { color: var(--success); font-weight: 600; }
.json-invalid { color: var(--error); font-weight: 600; }
.json-empty { color: var(--text-light); font-weight: 600; }
.link-btn { background: none; border: none; color: var(--tandem-blue); cursor: pointer; font-size: 11px; font-weight: 600; }

/* --- FOOTER --- */
.action-footer {
  background: white;
  border-top: 1px solid var(--border);
  padding: 12px 16px 16px;
  flex-shrink: 0;
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 20;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.06);
  max-width: 400px;
  margin: 0 auto;
  width: 100%;
  box-sizing: border-box;
}
.btn-primary { background: var(--tandem-navy); color: white; border: none; width: 100%; padding: 12px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; justify-content: center; gap: 8px; align-items: center; }
.btn-select { background: var(--tandem-blue); color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; cursor: pointer; }

/* --- MODALS --- */
.modal { display: none; position: fixed; inset: 0; background: rgba(19, 40, 76, 0.7); z-index: 100; align-items: center; justify-content: center; backdrop-filter: blur(1px); }
.modal-content { background: white; width: 320px; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
.modal-header { padding: 12px 16px; background: #f9fafb; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
.modal-header h3 { margin: 0; font-size: 14px; color: var(--tandem-navy); }
.modal-body { padding: 16px; }
.modal-body.no-pad { padding: 0; max-height: 300px; overflow-y: auto; }
.input-label { font-size: 11px; color: var(--text-light); display: block; margin-bottom: 4px; }
.key-input-wrapper { border: 1px solid var(--border); border-radius: 4px; display: flex; align-items: center; padding: 8px; gap: 8px; }
.key-input-wrapper input { border: none; outline: none; width: 100%; font-size: 13px; }
.select-wrapper select { width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; }
.modal-footer { padding: 12px 16px; background: #f9fafb; border-top: 1px solid var(--border); text-align: right; }
.type-item { padding: 12px 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 13px; color: var(--text-main); }
.type-item:hover { background: #eff6ff; color: var(--tandem-blue); }
.type-item .material-icons { font-size: 18px; color: var(--text-light); }

/* --- TOAST --- */
#toast-container { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 3000; display: flex; flex-direction: column; gap: 8px; }
.toast { background: var(--tandem-navy); color: white; padding: 10px 20px; border-radius: 30px; font-size: 13px; font-weight: 500; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.toast.error { background: var(--error); }

/* --- WIZARD OVERRIDES --- */
.wizard-overlay { position: fixed; inset: 0; background: rgba(19, 40, 76, 0.9); z-index: 200; display: flex; align-items: center; justify-content: center; }
.wizard-card { background: white; width: 360px; padding: 30px; border-radius: 16px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
.wizard-step { display: none; }
.wizard-step.active { display: block; }
.text-light { color: var(--text-light); font-size: 13px; margin: 0; }
.step-title { font-weight: 700; color: var(--tandem-navy); margin: 0 0 10px 0; font-size: 16px; }
.btn-next { background: var(--tandem-blue); color: white; border: none; padding: 12px 20px; border-radius: 6px; font-weight: 600; width: 100%; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 6px; }
.btn-back { background: white; border: 1px solid var(--border); color: var(--text-light); padding: 12px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; flex: 1; }
.btn-external { display: flex; align-items: center; justify-content: center; gap: 8px; border: 1px solid var(--border); padding: 12px; border-radius: 6px; text-decoration: none; color: var(--text-main); font-weight: 600; font-size: 13px; margin-bottom: 15px; background: #f9fafb; width: 100%; }
.nav-row { display: flex; gap: 10px; margin-top: 10px; }
.info-box { border: 1px solid var(--border); background: #f9fafb; border-radius: 8px; padding: 10px 12px; margin: 14px 0; text-align: left; }
.info-row { display: flex; align-items: center; gap: 10px; }
.info-icon { color: var(--tandem-blue); }
.info-text { flex: 1; }
.info-label { font-size: 11px; color: var(--text-light); margin-bottom: 2px; }
.info-value { font-size: 13px; font-weight: 700; color: var(--tandem-navy); word-break: break-all; }
.copy-btn { border: 1px solid var(--border); background: white; border-radius: 6px; padding: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.copy-btn:hover { background: #eff6ff; border-color: var(--tandem-blue); }
/* Schema type search */
.type-search-row { display: flex; align-items: center; gap: 8px; padding: 12px 12px 4px; position: sticky; top: 0; background: white; z-index: 1; }
.type-search { display: flex; align-items: center; gap: 6px; flex: 1; border: 1px solid var(--border); border-radius: 8px; padding: 6px 10px; background: #fff; }
.type-search input { border: none; outline: none; flex: 1; font-size: 13px; }
.type-search .material-icons { color: var(--text-light); font-size: 18px; }
